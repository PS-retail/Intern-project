{"ast":null,"code":"var _jsxFileName = \"/Users/annllamb/Documents/GitHub/Intern-project/frontend/src/components/videoChat/room.js\",\n    _s = $RefreshSig$();\n\nimport styled from \"styled-components\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport Options from \"./options\";\nimport Video from \"twilio-video\";\nimport Participant from \"./participent\";\nimport Button from \"../general/button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SmallContainer = styled.div`\n  ${{\n  \"height\": \"232px\",\n  \"float\": \"right\",\n  \"margin\": \"auto\"\n}}\n`;\n_c = SmallContainer;\nconst SideContainer = styled.div`\n  ${{\n  \"height\": \"905px\",\n  \"width\": \"310px\",\n  \"marginTop\": \"2rem\",\n  \"left\": \"0px\",\n  \"float\": \"left\",\n  \"display\": \"table-cell\",\n  \"verticalAlign\": \"bottom\"\n}}\n`;\n_c2 = SideContainer;\nconst MainContainer = styled.div`\n  ${{\n  \"marginRight\": \"0px\",\n  \"height\": \"100%\",\n  \"paddingTop\": \"2rem\",\n  \"paddingBottom\": \"2rem\",\n  \"float\": \"left\",\n  \"position\": \"absolute\",\n  \"left\": \"310px\"\n}}\n`;\n_c3 = MainContainer;\nconst RoomContainer = styled.div`\n  ${{\n  \"width\": \"100vw\",\n  \"height\": \"100vh\",\n  \"position\": \"relative\",\n  \"display\": \"block\"\n}}\n`;\n_c4 = RoomContainer;\nconst RoomName = styled.h3`\n  ${{\n  \"textAlign\": \"left\",\n  \"padding\": \"1rem\"\n}}\n`;\n_c5 = RoomName;\nconst Title = styled.span`\n  ${{\n  \"position\": \"absolute\",\n  \"top\": \"0.25rem\",\n  \"left\": \"50%\",\n  \"textAlign\": \"center\",\n  \"fontWeight\": \"600\",\n  \"fontSize\": \"1.25rem\",\n  \"lineHeight\": \"1.75rem\"\n}}\n`;\n_c6 = Title;\nconst ButtonContainer = styled.div`\n  ${{\n  \"position\": \"absolute\",\n  \"top\": \"0.5rem\",\n  \"right\": \"0.5rem\"\n}}\n`;\n_c7 = ButtonContainer;\nconst OptionsContainer = styled.div`\n  ${{\n  \"position\": \"absolute\",\n  \"bottom\": \"0.25rem\",\n  \"left\": \"0.5rem\",\n  \"marginLeft\": \"0.5rem\",\n  \"zIndex\": \"50\"\n}}\n`;\n_c8 = OptionsContainer;\n\nconst Room = ({\n  roomName,\n  token,\n  handleLogout\n}) => {\n  _s();\n\n  const [room, setRoom] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [voice, setVoice] = useState(false);\n  const [video, setVideo] = useState(true);\n  useEffect(() => {\n    const participantConnected = participant => {\n      setParticipants(prevParticipants => [...prevParticipants, participant]);\n    };\n\n    const participantDisconnected = participant => {\n      setParticipants(prevParticipants => prevParticipants.filter(p => p !== participant));\n    };\n\n    Video.connect(token, {\n      name: roomName\n    }).then(room => {\n      setRoom(room);\n      room.on(\"participantConnected\", participantConnected);\n      room.on(\"participantDisconnected\", participantDisconnected);\n      room.participants.forEach(participantConnected);\n    });\n    return () => {\n      setRoom(currentRoom => {\n        if (currentRoom && currentRoom.localParticipant.state === \"connected\") {\n          currentRoom.localParticipant.tracks.forEach(function (trackPublication) {\n            trackPublication.track.stop();\n          });\n          currentRoom.disconnect();\n          return null;\n        } else {\n          return currentRoom;\n        }\n      });\n    };\n  }, [roomName, token]);\n  const remoteParticipants = participants.map(participant => /*#__PURE__*/_jsxDEV(Participant, {\n    participant: participant\n  }, participant.sid, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(RoomContainer, {\n    children: [/*#__PURE__*/_jsxDEV(RoomName, {\n      children: [\"Room ID: \", roomName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Title, {\n      children: \"B&O Meeting\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonContainer, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        type: \"video\",\n        text: \"Leave Room\",\n        onClick: handleLogout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MainContainer, {\n      children: remoteParticipants[0]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SideContainer, {\n      children: /*#__PURE__*/_jsxDEV(SmallContainer, {\n        children: [room ? /*#__PURE__*/_jsxDEV(Participant, {\n          participant: room.localParticipant,\n          video: video,\n          voice: voice\n        }, room.localParticipant.sid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this) : \"\", remoteParticipants.slice(1) && room && remoteParticipants.slice(1)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OptionsContainer, {\n      children: /*#__PURE__*/_jsxDEV(Options, {\n        video: video,\n        voice: voice,\n        setVideo: setVideo,\n        setVoice: setVoice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Room, \"88ntKqpQb6kp0zokTG3B81cFh/4=\");\n\n_c9 = Room;\nexport default Room;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"SmallContainer\");\n$RefreshReg$(_c2, \"SideContainer\");\n$RefreshReg$(_c3, \"MainContainer\");\n$RefreshReg$(_c4, \"RoomContainer\");\n$RefreshReg$(_c5, \"RoomName\");\n$RefreshReg$(_c6, \"Title\");\n$RefreshReg$(_c7, \"ButtonContainer\");\n$RefreshReg$(_c8, \"OptionsContainer\");\n$RefreshReg$(_c9, \"Room\");","map":{"version":3,"sources":["/Users/annllamb/Documents/GitHub/Intern-project/frontend/src/components/videoChat/room.js"],"names":["styled","React","useState","useEffect","useCallback","Options","Video","Participant","Button","SmallContainer","div","SideContainer","MainContainer","RoomContainer","RoomName","h3","Title","span","ButtonContainer","OptionsContainer","Room","roomName","token","handleLogout","room","setRoom","participants","setParticipants","voice","setVoice","video","setVideo","participantConnected","participant","prevParticipants","participantDisconnected","filter","p","connect","name","then","on","forEach","currentRoom","localParticipant","state","tracks","trackPublication","track","stop","disconnect","remoteParticipants","map","sid","slice"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAuD,OAAvD;AAEA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;;AAEA,MAAMC,cAAc,GAAGT,MAAM,CAACU,GAAI;AAClC,IAAM;AAAA;AAAA;AAAA;AAAA,CAIF;AACJ,CANA;KAAMD,c;AAQN,MAAME,aAAa,GAAGX,MAAM,CAACU,GAAI;AACjC,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAQF;AACJ,CAVA;MAAMC,a;AAYN,MAAMC,aAAa,GAAGZ,MAAM,CAACU,GAAI;AACjC,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAMF;AACJ,CARA;MAAME,a;AAUN,MAAMC,aAAa,GAAGb,MAAM,CAACU,GAAI;AACjC,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA,CAKF;AACJ,CAPA;MAAMG,a;AASN,MAAMC,QAAQ,GAAGd,MAAM,CAACe,EAAG;AAC3B,IAAM;AAAA;AAAA;AAAA,CAGF;AACJ,CALA;MAAMD,Q;AAON,MAAME,KAAK,GAAGhB,MAAM,CAACiB,IAAK;AAC1B,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAOF;AACJ,CATA;MAAMD,K;AAWN,MAAME,eAAe,GAAGlB,MAAM,CAACU,GAAI;AACnC,IAAM;AAAA;AAAA;AAAA;AAAA,CAIF;AACJ,CANA;MAAMQ,e;AAQN,MAAMC,gBAAgB,GAAGnB,MAAM,CAACU,GAAI;AACpC,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAMF;AACJ,CARA;MAAMS,gB;;AAUN,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,KAAZ;AAAmBC,EAAAA;AAAnB,CAAD,KAAuC;AAAA;;AAClD,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBvB,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACwB,YAAD,EAAeC,eAAf,IAAkCzB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAAC0B,KAAD,EAAQC,QAAR,IAAoB3B,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAAC4B,KAAD,EAAQC,QAAR,IAAoB7B,QAAQ,CAAC,IAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM6B,oBAAoB,GAAIC,WAAD,IAAiB;AAC5CN,MAAAA,eAAe,CAAEO,gBAAD,IAAsB,CAAC,GAAGA,gBAAJ,EAAsBD,WAAtB,CAAvB,CAAf;AACD,KAFD;;AAGA,UAAME,uBAAuB,GAAIF,WAAD,IAAiB;AAC/CN,MAAAA,eAAe,CAAEO,gBAAD,IACdA,gBAAgB,CAACE,MAAjB,CAAyBC,CAAD,IAAOA,CAAC,KAAKJ,WAArC,CADa,CAAf;AAGD,KAJD;;AAKA3B,IAAAA,KAAK,CAACgC,OAAN,CAAchB,KAAd,EAAqB;AACnBiB,MAAAA,IAAI,EAAElB;AADa,KAArB,EAEGmB,IAFH,CAEShB,IAAD,IAAU;AAChBC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAA,MAAAA,IAAI,CAACiB,EAAL,CAAQ,sBAAR,EAAgCT,oBAAhC;AACAR,MAAAA,IAAI,CAACiB,EAAL,CAAQ,yBAAR,EAAmCN,uBAAnC;AACAX,MAAAA,IAAI,CAACE,YAAL,CAAkBgB,OAAlB,CAA0BV,oBAA1B;AACD,KAPD;AAQA,WAAO,MAAM;AACXP,MAAAA,OAAO,CAAEkB,WAAD,IAAiB;AACvB,YAAIA,WAAW,IAAIA,WAAW,CAACC,gBAAZ,CAA6BC,KAA7B,KAAuC,WAA1D,EAAuE;AACrEF,UAAAA,WAAW,CAACC,gBAAZ,CAA6BE,MAA7B,CAAoCJ,OAApC,CAA4C,UAC1CK,gBAD0C,EAE1C;AACAA,YAAAA,gBAAgB,CAACC,KAAjB,CAAuBC,IAAvB;AACD,WAJD;AAKAN,UAAAA,WAAW,CAACO,UAAZ;AACA,iBAAO,IAAP;AACD,SARD,MAQO;AACL,iBAAOP,WAAP;AACD;AACF,OAZM,CAAP;AAaD,KAdD;AAeD,GAhCQ,EAgCN,CAACtB,QAAD,EAAWC,KAAX,CAhCM,CAAT;AAqCA,QAAM6B,kBAAkB,GAAGzB,YAAY,CAAC0B,GAAb,CAAkBnB,WAAD,iBAC1C,QAAC,WAAD;AAAmC,IAAA,WAAW,EAAEA;AAAhD,KAAkBA,WAAW,CAACoB,GAA9B;AAAA;AAAA;AAAA;AAAA,UADyB,CAA3B;AAIA,sBACE,QAAC,aAAD;AAAA,4BACE,QAAC,QAAD;AAAA,8BAAoBhC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE,QAAC,eAAD;AAAA,6BACE,QAAC,MAAD;AACE,QAAA,IAAI,EAAE,OADR;AAEE,QAAA,IAAI,EAAE,OAFR;AAGE,QAAA,IAAI,EAAE,YAHR;AAIE,QAAA,OAAO,EAAEE;AAJX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAHF,eAWE,QAAC,aAAD;AAAA,gBAAgB4B,kBAAkB,CAAC,CAAD;AAAlC;AAAA;AAAA;AAAA;AAAA,YAXF,eAYE,QAAC,aAAD;AAAA,6BACE,QAAC,cAAD;AAAA,mBACG3B,IAAI,gBACH,QAAC,WAAD;AAEE,UAAA,WAAW,EAAEA,IAAI,CAACoB,gBAFpB;AAGE,UAAA,KAAK,EAAEd,KAHT;AAIE,UAAA,KAAK,EAAIF;AAJX,WACOJ,IAAI,CAACoB,gBAAL,CAAsBS,GAD7B;AAAA;AAAA;AAAA;AAAA,gBADG,GAQH,EATJ,EAWGF,kBAAkB,CAACG,KAAnB,CAAyB,CAAzB,KAA+B9B,IAA/B,IAAuC2B,kBAAkB,CAACG,KAAnB,CAAyB,CAAzB,CAX1C;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAZF,eA2BE,QAAC,gBAAD;AAAA,6BACE,QAAC,OAAD;AACE,QAAA,KAAK,EAAExB,KADT;AAEE,QAAA,KAAK,EAAEF,KAFT;AAGE,QAAA,QAAQ,EAAEG,QAHZ;AAIE,QAAA,QAAQ,EAAEF;AAJZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA3BF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAsCD,CArFD;;GAAMT,I;;MAAAA,I;AAuFN,eAAeA,IAAf","sourcesContent":["import styled from \"styled-components\";\nimport tw from \"twin.macro\";\nimport React, { useState, useEffect, useCallback} from \"react\";\n\nimport Options from \"./options\";\nimport Video from \"twilio-video\";\nimport Participant from \"./participent\";\nimport Button from \"../general/button\";\n\nconst SmallContainer = styled.div`\n  ${tw`\n    h-[232px]\n    float-right\n    m-auto\n  `}\n`;\n\nconst SideContainer = styled.div`\n  ${tw`\n    h-[905px]\n    w-[310px]\n    mt-8\n    left-0\n    float-left\n    table-cell\n    align-bottom\n  `}\n`;\n\nconst MainContainer = styled.div`\n  ${tw`\n    mr-0\n    h-full\n    py-8\n    float-left\n    absolute left-[310px]\n  `}\n`;\n\nconst RoomContainer = styled.div`\n  ${tw`\n    w-screen\n    h-screen\n    relative\n    block\n  `}\n`;\n\nconst RoomName = styled.h3`\n  ${tw`\n    text-left\n    p-4\n  `}\n`;\n\nconst Title = styled.span`\n  ${tw`\n    absolute\n    top-1\n    left-1/2\n    text-center\n    font-semibold\n    text-xl\n  `}\n`;\n\nconst ButtonContainer = styled.div`\n  ${tw`\n    absolute\n    top-2\n    right-2\n  `}\n`;\n\nconst OptionsContainer = styled.div`\n  ${tw`\n    absolute\n    bottom-1\n    left-2\n    ml-2\n    z-50\n  `}\n`;\n\nconst Room = ({ roomName, token, handleLogout }) => {\n  const [room, setRoom] = useState(null);\n  const [participants, setParticipants] = useState([]);\n  const [voice, setVoice] = useState(false);\n  const [video, setVideo] = useState(true);\n\n  useEffect(() => {\n    const participantConnected = (participant) => {\n      setParticipants((prevParticipants) => [...prevParticipants, participant]);\n    };\n    const participantDisconnected = (participant) => {\n      setParticipants((prevParticipants) =>\n        prevParticipants.filter((p) => p !== participant)\n      );\n    };\n    Video.connect(token, {\n      name: roomName,\n    }).then((room) => {\n      setRoom(room);\n      room.on(\"participantConnected\", participantConnected);\n      room.on(\"participantDisconnected\", participantDisconnected);\n      room.participants.forEach(participantConnected);\n    });\n    return () => {\n      setRoom((currentRoom) => {\n        if (currentRoom && currentRoom.localParticipant.state === \"connected\") {\n          currentRoom.localParticipant.tracks.forEach(function (\n            trackPublication\n          ) {\n            trackPublication.track.stop();\n          });\n          currentRoom.disconnect();\n          return null;\n        } else {\n          return currentRoom;\n        }\n      });\n    };\n  }, [roomName, token]);\n\n\n\n\n  const remoteParticipants = participants.map((participant) => (\n    <Participant key={participant.sid} participant={participant} />\n  ));\n\n  return (\n    <RoomContainer>\n      <RoomName>Room ID: {roomName}</RoomName>\n      <Title>B&O Meeting</Title>\n      <ButtonContainer>\n        <Button\n          size={\"small\"}\n          type={\"video\"}\n          text={\"Leave Room\"}\n          onClick={handleLogout}\n        />\n      </ButtonContainer>\n      <MainContainer>{remoteParticipants[0]}</MainContainer>\n      <SideContainer>\n        <SmallContainer>\n          {room ? (\n            <Participant\n              key={room.localParticipant.sid}\n              participant={room.localParticipant}\n              video={video}\n              voice = {voice}\n            />\n          ) : (\n            \"\"\n          )}\n          {remoteParticipants.slice(1) && room && remoteParticipants.slice(1)}\n        </SmallContainer>\n      </SideContainer>\n      <OptionsContainer>\n        <Options\n          video={video}\n          voice={voice}\n          setVideo={setVideo}\n          setVoice={setVoice}\n        />\n      </OptionsContainer>\n    </RoomContainer>\n  );\n};\n\nexport default Room;\n"]},"metadata":{},"sourceType":"module"}